spec:
  name: "Add'as – Plataforma SaaS B2B/B2C"
  description: "SaaS completo para unificação, monetização e rastreabilidade da cadeia de produtos naturais."
  owner: "Natkillua"
  date: "2025-11-10"
  
  requirements:
    - id: REQ-001
      title: "Ingestão Multi-Formato"
      description: "Aceitar dados de fornecedores em CSV, Excel, XML, JSON, Google Sheets e ERPs via API ou Webhook."
      ears:
        when: "o fornecedor envia dados de produtos"
        then: "os dados devem ser ingeridos em <10s no ETL Engine"

    - id: REQ-002
      title: "ETL Modular e Vendável"
      description: "Pipeline de ETL configurável por fornecedor, com API pública para terceiros."
      ears:
        when: "o fornecedor ou cliente externo executa ETL"
        then: "os dados são extraídos, transformados e carregados na Unified DB"

    - id: REQ-003
      title: "Catálogo Unificado"
      description: "Deduplicação, enriquecimento semântico e rastreabilidade dos produtos."
      ears:
        when: "os dados são carregados no DB"
        then: "o catálogo deve estar pronto para B2C e B2B com rastreabilidade"

    - id: REQ-004
      title: "Portal B2C White-Label"
      description: "Portal embedável com checkout, tema automático e carrinho consolidado."
      ears:
        when: "um cliente acessa o portal"
        then: "o portal exibe produtos e permite compras com rastreio"

    - id: REQ-005
      title: "Segurança e Compliance"
      description: "Criptografia, TLS 1.3, OAuth2, LGPD e auditoria completa."
      ears:
        when: "qualquer acesso ou transação ocorre"
        then: "todas as operações devem estar protegidas e logadas"

  architecture:
    ingestion_gateway:
      description: "Aceita múltiplos formatos e protocolos"
      sources:
        - type: CSV/Excel
          auth: "JWT + org_id"
        - type: XML/JSON
          auth: "API Key"
        - type: Google Sheets
          auth: "OAuth 2.0"
        - type: ERP
          auth: "OAuth App / Webhook"
        - type: Custom API
          auth: "Bearer Token"

    etl_engine:
      description: "Airflow + Python, modular, ETL as a Service"
      api: "/etl/run"
      schedule: "15min (MVP) → 1min (Pro)"

    unified_db:
      description: "PostgreSQL com RLS e Merkle Tree para rastreabilidade"
      tables: ["products_unified"]

    api_gateway:
      services:
        - name: Auth
          tech: Keycloak
          port: 8080
        - name: Billing
          tech: Node.js + Stripe
          port: 3001
        - name: Search
          tech: Elasticsearch
          port: 9200
        - name: Logistics
          tech: Python + OR-Tools
          port: 3002
        - name: ETL API
          tech: FastAPI
          port: 8000

    frontend:
      b2c_portal: "Next.js White-Label"
      b2b_dashboard: "React Admin"
      mobile: "PWA com offline cache"

  lifecycle:
    - step: "Onboarding do Fornecedor"
      description: "Zero-code, gera supplier_id, API Key e Webhook URL"
    - step: "Configuração do Mapping"
      description: "Mapeamento de campos via drag-and-drop e IA"
    - step: "ETL em Produção"
      description: "Execução automática do pipeline e notificações"
    - step: "Catálogo Unificado"
      description: "Deduplicação e enriquecimento semântico"
    - step: "Portal B2C Ativo"
      description: "Portal embedável com checkout e rastreabilidade"
    - step: "Venda + Rastreio"
      description: "Pedido gerado, QR code, blockchain-light para rastreabilidade"
    - step: "Pagamento + Relatórios"
      description: "Monetização híbrida e relatórios para fornecedores e varejistas"
    - step: "Feedback Loop"
      description: "IA sugere ajustes de estoque e estratégias de vendas"

  roadmap:
    - quarter: "0–3"
      deliverable: "MVP ETL + Portal B2C"
    - quarter: "3–6"
      deliverable: "ETL as a Service + Rastreabilidade"
    - quarter: "6–9"
      deliverable: "Logística IA + Microcrédito"
    - quarter: "9–12"
      deliverable: "Marketplace B2B + IA de Demanda"

  subscription_models:
    - plan: "Free"
      price: "R$0"
      limits: "1 fornecedor, 100 SKUs, sync 4h"
    - plan: "Basic"
      price: "R$99/mês"
      limits: "5 fornecedores, 1k SKUs, sync 1h"
    - plan: "Pro"
      price: "R$499/mês"
      limits: "Ilimitado, sync 15min, ETL API"
    - plan: "Enterprise"
      price: "Custom"
      limits: "Blockchain full, SLA 99.99%, suporte 24h"
